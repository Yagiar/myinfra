# MyInfra

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ—Ä–∞ —Å–µ—Ä–≤–∏—Å—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Docker 20.10+
* Docker Compose v2
* **macOS / Linux / WSL2** ‚Äî –ª—é–±–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –≥–¥–µ –¥–æ—Å—Ç—É–ø–µ–Ω Docker-Daemon.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
 git clone https://github.com/Yagiar/myinfra.git
 cd myinfra
```
# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–∏) —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è localhost
[–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤](nginx/README.md)
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç—ç–∫ –≤ —Ñ–æ–Ω–µ
 ```bash
 docker compose up -d
```
# 4. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

`https://localhost:8999`
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ OpenProject –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–∞—Å —Å–æ–∑–¥–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
myinfra/
‚îú‚îÄ docker-compose.yml        # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å—ã
‚îî‚îÄ nginx/
   ‚îú‚îÄ conf.d/openproject.conf # –ö–æ–Ω—Ñ–∏–≥ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞
   ‚îú‚îÄ certs/                  # TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (git-ignore)
   ‚îî‚îÄ README.md               # –î–µ—Ç–∞–ª–∏ –ø–æ —Ä–∞–±–æ—Ç–µ Nginx
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ / –ø–æ—Ä—Ç–∞

1. –í —Ñ–∞–π–ª–µ `docker-compose.yml` –ø–æ–º–µ–Ω—è–π—Ç–µ `OPENPROJECT_HOST__NAME` –Ω–∞ —Å–≤–æ–π –¥–æ–º–µ–Ω.
2. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `OPENPROJECT_HTTPS` (–æ—Å—Ç–∞–≤—å—Ç–µ `"true"`).
3. –í `nginx/conf.d/openproject.conf` –∏–∑–º–µ–Ω–∏—Ç–µ `server_name`, –∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ —Å–µ–∫—Ü–∏—é `listen`.
4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç Let‚Äôs Encrypt).

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

* `openproject_pgdata` ‚Äî PostgreSQL –¥–∞–Ω–Ω—ã–µ OpenProject.
* `openproject_data`  ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª—ã –∏ –∞—Å—Å–µ—Ç—ã.

–î–ª—è –±—ç–∫–∞–ø–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ docker-—Ç–æ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `docker run --rm ‚Ä¶ tar`).

## –°—Ü–µ–Ω–∞—Ä–∏–∏

–í –∫–∞—Ç–∞–ª–æ–≥–µ `scripts/` –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç—ç–∫
 docker compose down

# –ü–æ–ª—É—á–∏—Ç—å —Å–≤–µ–∂–∏–π –æ–±—Ä–∞–∑ OpenProject
 docker pull openproject/openproject:latest

# –ü–æ–¥–Ω—è—Ç—å –∑–∞–Ω–æ–≤–æ
 docker compose up -d
```

Nginx –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ (`docker pull nginx:alpine`).

---

Happy coding! üéâ
